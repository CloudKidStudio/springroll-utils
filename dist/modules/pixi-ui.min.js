/*! springroll-utils 0.0.1 */
!function(){"use strict";!function(){var a=include("springroll.pixi.Button"),b=include("PIXI.Sprite"),c=include("PIXI.Texture"),d=function(d,e,f,g){a.call(this,d,e,g),this.icon=new b,f.pos&&(this.icon.x=f.pos.x,this.icon.y=f.pos.y),f.scale&&(this.icon.scale.x=f.scale.x,this.icon.scale.y=f.scale.y),this.addChildAt(this.icon,1);var h=f.icon||d.up.icon;for(var i in this._stateData){var j;j=d[i]?d[i].icon||h:h,"string"==typeof j&&(j=c.fromImage(j)),this._stateData[i].icon=j}this._updateState()},e=extend(d,a),f=a.prototype;e._Button_updateState=e._updateState,e._updateState=function(){if(this.icon){var a=this._Button_updateState();this.icon.texture=a.icon}},e.destroy=function(){this.back&&(f.destroy.call(this),this.icon=null)},namespace("springroll.pixi").IconButton=d}(),function(){var a=include("PIXI.Container"),b=include("PIXI.Graphics"),c=function(){a.call(this),this.content=new a,this.addChild(this.content),this.items=[],this.orientation="horizontal",this.horizontalSpacing=0,this.verticalSpacing=0,this.itemsPerRow=1,this.itemsPerColumn=1,this.listWidth=0,this.listHeight=0,this.maxScroll=0,this.listViewArea=0},d=extend(c,a),e=a.prototype;d.setMask=function(a,c){var d;"number"==typeof a&&"number"==typeof c?(d=new b,d.beginFill(0,1),d.drawRect(0,0,a,c),d.endFill(),"vertical"==this.orientation?(this.listViewArea=c,this.maxScroll=this.listHeight-c):(this.listViewArea=a,this.maxScroll=this.listWidth-a)):d=a||null,this.maskObj&&this.removeChild(this.maskObj),this.content.mask=d,this.addChild(d),this.maskObj=d},Object.defineProperty(d,"scroll",{get:function(){return"vertical"==this.orientation?-this.content.x:-this.content.y},set:function(a){0>a?a=0:a>this.maxScroll&&(a=this.maxScroll),"vertical"==this.orientation?this.content.x=-a:this.content.y=-a}}),Object.defineProperty(d,"scrollPercent",{get:function(){return"vertical"==this.orientation?-this.content.x/this.maxScroll:-this.content.y/this.maxScroll},set:function(a){0>a?a=0:a>this.maxScroll&&(a=this.maxScroll),a*=-maxScroll,"vertical"==this.orientation?this.content.x=a:this.content.y=a}}),d.addItem=function(a){this.items.indexOf(a)>=0||(this.items.push(a),this.content.addChild(a),this.updateOrder())},d.updateOrder=function(){this.listWidth=0,this.listHeight=0;for(var a=0,b=0,c=this.items,d=0,e=c.length;e>d;++d){var f=c[d];f.x=a,f.y=b;var g=f.getLocalBounds().clone();g.width*=f.scale.x,g.height*=f.scale.y,f.x+g.width>this.listWidth&&(this.listWidth=f.x+g.width),f.y+g.height>this.listHeight&&(this.listHeight=f.y+g.height),"horizontal"==this.orientation?d%this.itemsPerColumn==this.itemsPerColumn-1?(b=0,a+=g.width+this.horizontalSpacing):b+=g.height+this.verticalSpacing:d%this.itemsPerRow==this.itemsPerRow-1?(a=0,b+=g.height+this.verticalSpacing):a+=g.width+this.horizontalSpacing}"horizontal"==this.orientation?this.maxScroll=this.listWidth-this.listViewArea:this.maxScroll=this.listHeight-this.listViewArea,this.scroll=this.scroll,this.emit("resize",this.listWidth,this.listHeight)},d.removeItem=function(a,b){var c=this.items.indexOf(a);-1!=c&&(this.items.splice(c,1),this.content.removeChild(a),b||(this.updateOrder(),this.emit("resize",this.listWidth,this.listHeight)),this.emit("itemRemoved",a))},d.removeAllItems=function(){for(var a=this.items.length-1;a>=0;--a)this.removeItem(this.items[a],!0);this.listWidth=this.listHeight=0,this.scroll=0,this.emit("resize",this.listWidth,this.listHeight)},d.destroy=function(){e.destroy.call(this),this.content.destroy(),this.content=this.items=null},namespace("springroll.pixi").List=c}(),function(){var a,b,c=include("PIXI.Container"),d=(include("PIXI.Texture"),include("PIXI.Rectangle")),e=include("springroll.pixi.DragManager"),f=include("springroll.Application"),g=function(f,g,h){a||(a=include("springroll.pixi.Slice3Sprite"),b=include("springroll.pixi.Slice3Textures")),c.call(this),this.onListResize=this.onListResize.bind(this),this.onAreaDown=this.onAreaDown.bind(this),this.onAreaUp=this.onAreaUp.bind(this),this.onAreaUpOutside=this.onAreaUpOutside.bind(this),this.onAreaOver=this.onAreaOver.bind(this),this.onAreaOut=this.onAreaOut.bind(this),this.onTabDown=this.onTabDown.bind(this),this.onTabUp=this.onTabUp.bind(this),this.onTabUpOutside=this.onTabUpOutside.bind(this),this.onTabOver=this.onTabOver.bind(this),this.onTabOut=this.onTabOut.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.update=this.update.bind(this),this.areaTextures={},this.areaStates={},this.tabTextures={},this.tabStates={},this.area=new c,this.addChild(this.area),this.tab=new c,this.addChild(this.tab),this.area.interactiveChildren=this.tab.interactiveChildren=!1,this.tabSize=0,this.minTabSize=0,this.areaSize=0;var i;for(i in f.states){this.areaTextures[i]=new b(f[i],f.sliceData);var j=this.areaStates[i]=new a(this.areaTextures[i]);this.area.addChild(j),f.height?j.setHeight(f.height):f.width&&j.setWidth(f.width)}f.height?this.areaSize=f.height:f.width&&(this.areaSize=f.width),this.tabPadding=f.tabPadding;for(i in g.states){this.tabTextures[i]=new b(g[i],g.sliceData);var k=this.tabStates[i]=new a(this.tabTextures[i]);this.tab.addChild(k)}this.tabSize=g.size,this.minTabPos=g.minPos,this.maxTabPos=this.areaSize-g.minPos-this.tabSize,this.dragManager=new e(this.onDragStart,this.onDragEnd),this._tabBounds=new d,this.dragManager.addObject(this.tab,this._tabBounds),this.tab.enableDrag(),this.target=h||null,this._areaOver=!1,this._areaDown=!1,this._tabOver=!1,this._tabDown=!1},h=extend(g,c),i=c.prototype;Object.defineProperty(h,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=!!a;var b=this.tab,c=this.area;c.interactive=b.interactive=c.buttonMode=b.buttonMode=this._enabled,b.off("mousedown",this.onTabDown),b.off("touchstart",this.onTabDown),b.off("mouseup",this.onTabUp),b.off("touchend",this.onTabUp),b.off("mouseupoutside",this.onTabUpOutside),b.off("touchendoutside",this.onTabUpOutside),b.off("mouseover",this.onTabOver),b.off("mouseout",this.onTabOut),c.off("mousedown",this.onAreaDown),c.off("touchstart",this.onAreaDown),c.off("mouseup",this.onAreaUp),c.off("touchend",this.onAreaUp),c.off("mouseupoutside",this.onAreaUpOutside),c.off("touchendoutside",this.onAreaUpOutside),c.off("mouseover",this.onAreaOver),c.off("mouseout",this.onAreaOut),a&&(b.on("mousedown",this.onTabDown),b.on("touchstart",this.onTabDown),b.on("mouseup",this.onTabUp),b.on("touchend",this.onTabUp),b.on("mouseupoutside",this.onTabUpOutside),b.on("touchendoutside",this.onTabUpOutside),this.tabStates.over&&(b.on("mouseover",this.onTabOver),b.on("mouseout",this.onTabOut)),c.on("mousedown",this.onAreaDown),c.on("touchstart",this.onAreaDown),c.on("mouseup",this.onAreaUp),c.on("touchend",this.onAreaUp),c.on("mouseupoutside",this.onAreaUpOutside),c.on("touchendoutside",this.onAreaUpOutside),this.areaStates.over&&(c.on("mouseover",this.onAreaOver),c.on("mouseout",this.onAreaOut))),this._updateAreaState(),this._updateTabState()}}),Object.defineProperty(h,"target",{get:function(){return this._target},set:function(a){if(this._target&&this._target.off("resize",this.onListResize),this._target=a,a){var b=this._tabBounds;"vertical"==a.orientation?(b.x=b.width=b.right=0,b.y=this.minTabPos,b.height=this.maxTabPos-this.minTabPos,b.bottom=b.y+b.height):(b.y=b.height=b.bottom=0,b.x=this.minTabPos,b.width=this.maxTabPos-this.minTabPos,b.right=b.x+b.width),a.on("resize",this.onListResize),this.onListResize(a.listWidth,a.listHeight),this.enabled=!0}else this.enabled=!1}}),h._updateAreaState=function(){var a=this.areaStates;for(var b in a)a[b].visible=!1;var c;this._enabled?this._areaDown?c=a.down:this._areaOver&&(c=a.over):c=a.disabled,c||(c=a.up),c.visible=!0},h._updateTabState=function(){var a=this.tabStates;for(var b in a)a[b].visible=!1;var c;this._enabled?this._areaDown?c=a.down:this._areaOver&&(c=a.over):c=a.disabled,c||(c=a.up),c.visible=!0},h.onDragStart=function(){f.instance.on("update",this.update)},h.update=function(){var a;a="vertical"==this._target.orientation?this.tab.y:this.tab.x,a=(a-this.minTabPos)/(this.maxTabPos-this.minTabPos),this._target.scrollPercent=a},h.onDragEnd=function(){f.instance.off("update",this.update)},h.onListResize=function(a,b){var c=this._target;this.enabled=c.maxScroll>0},h.onAreaDown=function(){this._areaDown=!0,this._updateAreaState()},h.onAreaUp=function(a){this._areaDown=!1;var b,c=a.data.getLocalPosition(this);"vertical"==this._target.orientation?(this.tab.y=Math.clamp(c.y-this.tabSize/2,this.minTabPos,this.maxTabPos),b=(this.tab.y-this.minTabPos)/(this.maxTabPos-this.minTabPos)):(this.tab.x=Math.clamp(c.x-this.tabSize/2,this.minTabPos,this.maxTabPos),b=(this.tab.x-this.minTabPos)/(this.maxTabPos-this.minTabPos)),this._target.scrollPercent=b,this._updateAreaState()},h.onAreaUpOutside=function(){this._areaDown=!1,this._updateAreaState()},h.onAreaOver=function(){this._areaOver=!0,this._updateAreaState()},h.onAreaOut=function(){this._areaOver=!1,this._updateAreaState()},h.onTabDown=function(){this._tabDown=!0,this._updateTabState()},h.onTabUp=function(){this._tabDown=!1,this._updateTabState()},h.onTabUpOutside=function(){this._tabDown=!1,this._updateTabState()},h.onTabOver=function(){this._tabOver=!0,this._updateTabState()},h.onTabOut=function(){this._tabOver=!1,this._updateTabState()},h.destroy=function(){i.destroy.call(this),this.target=null,f.instance.off("update",this.update),this.dragManager.destroy(),this.area.destroy(),this.tab.destroy();var a;for(a in this.tabStates)this.tabStates[a].destroy(),this.tabTextures[a].destroy();for(a in this.areaStates)this.areaStates[a].destroy(),this.areaTextures[a].destroy();this.dragManager=this.tab=this.area=this.tabStates=this.tabTextures=this.areaStates=this.areaTextures=this.onListResize=this.onAreaDown=this.onAreaUp=this.onAreaUpOutside=this.onAreaOver=this.onAreaOut=this.onTabDown=this.onTabUp=this.onTabUpOutside=this.onTabOver=this.onTabOut=this.onDragStart=this.onDragEnd=this.update=null},namespace("springroll.pixi").Scroller=g}();}();